sudo: true
cache:
  apt: true
  directories:
  - "$HOME/google-cloud-sdk/"
services:
  - docker
before_script:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then bash scripts/rebuild-env.sh; fi
script:
- docker-compose -f docker-compose-test.yml build
- docker-compose -f docker-compose-test.yml -p ci up
- docker logs -f ci_uppy_1
- docker wait ci_uppy_1
env:
  global:
  - secure: 3RPBBbMob6VhV3uWdKMWcDWqlmJh2Z6twNW3KdneOlMHpyO8MUzU16y6zZgErCrQ74MCCSz3Z56iGHdg04T6j6KBy+czDAQ14m28LBMvjKrVdzMrwdampzajzFNPuc65Up8vFWiZPRoySHkDAOJaChUccO11BFMkAXsK8BZNeX/d6w2/jgCfd/HxwEMnfQa3ldEViTiRw9jXiEkxsASHtRguj9gUVCm5EoA6XfGkGbsBBF6D1WJrb5pu2TAjdlQ0vJiAFuExOkEtP0cgJ8CkbgZfKAyrBhm7eI/I2f0/pMzeNxgfoQPkMcRztuGnL6NChukOr9W95BDMeTXX6zfVpI8OpIzseC2c6vvA/MbIxxnPhPHx4zveSRh2iCd5kRiB7MK8oXgN/1NKEO+jIwH5Cxg9RiGTM8ws88GZxFQrqK8rRsSD3Cr3+O5kp2J5XT2GCNbWcPF7RiRmy1lTWe9O5qYJFOB0msIpR7Sp0hwYrwGLGirVZ52nZZMhLw9Tt8fWdhjUA4ZCgtv3B0gKeQWpwnn5Y9lJB31+X6su0iys2sAXNFlxJ2ZgUzSPTzvd5MFHdAWlG7/4Np9aHtxULeiAnYbx/tQGgqakj3e2XNiywIhi+lQqzA7JKhPeEXRt6rzBTQCYhF5GBYQirm/zoLpXrxNb2WTH4BP/Igdlh8VsDMw=
  - secure: oHORjKHO5OMKDKEAI21L+Pm/+hpyW3sNejpCEst/pE73OnYRFcZ20ryH3Hewf77/VzhlVTED99Rxr71H8AIIrzzoqBQQsG08f/ANCw0hk2rj75eXe8n7l9+aVGF3twDUupsw+yvi+xP3JpcqktB6bDrCpyQtmhIf13T85gXriRLZ4YbTvFYrVx2wwYFHZhsktzPAJYAMDsCgaTd4bnPRb1tlwELnDX4JF8v1CV0j8+U7fQkqz8lRndqaJHP58ZS/sfBatN8CS1isEC7btaM37JYWMO2scQmxykV8bo9JwHGQc2UB6GtrBAoLErFlGZR3ZjuEr46r1kJy4YvlW1wUaubNIM4Fb9MicNY9snkL+RNMuImczXiUkWIsFJAOLcI8fpir5KfJl6g1Gqi+6oAw53vo0FGCABZtbXJoathDatndDiHAMCACYuJWoWq/LVG4WqsGDJE5xh1s0xYRolzQONSP9JbKlhIYtWW3raVYxkaFtPqMZt6ic74RcNbNqb969zqYyKMbwGchk631QRoOXCqjsDNmiFhsKMLPDX40Q56g1agLnAxLaEvIFU9cWrgpMj0HAtd4icIoyHbZfyr1hOhydi0eJAvxfw8xe0TQp1E9m1We8mmUHFe3GanjhcnnRAUEHD7uK7OcxY2xQ/w9+TC70UFpkg/hvLUEMeNTa0w=
  - secure: BnPPvf/2RKs6bj2pFAonwaqLXLbhZoIbc9DQA+en3tBRz/vfbbSqxFX9DD1qMxdlX/M2j2g/AAjCxheMwOSnGh+Wy+CFWSLsA5FJpYV4D/ojfqV3MgdCoDUxnlMYJb3yBH52cUHB0yM8ooIqB/VQIUQx1w10epYXScawg61YzdBp6fvQgoDuprSRdoobYy+AlfznkTkCSAj3lwjCZnprGAqDZAXyXLAnMbuUoxFkQgCMRFt/6DziKVhND58xuqBs6rd2fD8/lK3JLRSQHkehgj5tw8dAzuDak9imlOi0dBOSQ5LqdBW5o/A/ZS/kqw5EAEI0IDk55VqKo1us6SsvV1qhRK7NsyKNFRSO+BdHNr8vFv6eMGkusW6aMH/fRH+MvasAPwYr16UjBgFYmnG6EvvOuzstztzer/IOvHNafMZNpkYGN+MkAsMJuQgHrGSigRCE0AJX1JcyL5uZght8w3KzK7sayLH0LkiwBxpTiwIlb9XL2Tmbs7IW//ehvFruJGpJX/jJhsDYMMeAaMngdV74JnkC3tCu2g+l7IL2R8jyhzr91y6xheP0D9U40onC2acmDsCgGJ2GVN+myQ/R47RsvrGkzh7jUZ8bTn8P6wX72gNb936MG0cTzxq79cZWAZNYH3eyNy1Si6UUYU+EbJDsho92HEQP2ZYfl3cJ810=
  - secure: TW6U8TLaL76QXO1K+adKCLUABtvQ7GLRyEQQaUZyQh0fY/v1xtBArOfVo+x+OF4E0dmRdG01Ocywgcq2JgfcmLQTKzqocN1p7wl2AAEL2nnGbOa1oGZwo7ZiAACbxF7EG0zR0doNauORflfZTCntmhIyz5uA5F574VdIU8Sb1VIZjvHBBeqRwIyPra588kMVBlUd1AtuLjsNOIIFrKwBK1Cn5h3/w8Pk7GbxnFxmDkBfHf6YAy/tSMgIkrg6cu3uTTzfc3l4OO6ZAlyJYN93JlGjDiVIAH9AbE2o786tk3AXJLDTSmFAL+3F1udq2ELHkqw++S9vSxE2YgjVoPXw9clG3rmc2VJBQSwRYg3MQaUaB8na4zCV3TlLF+6s+D0njZW8g5sTyo0WorQsFxI0TFGRp86DpZvmAa4yRw77UQwi+XyXcvyoo1IqMbtOf9HqasHX7RpKpvB2HqSuRar7lab45unCId0AzAl9ycAppTFgs1iIXNBZaKwiWELyq9x4I2CaFbzdfJ6Y2dff84I+LDqXUPzehWRJVMZOJabLP/dyZlhDR0m6BPHZEWCQHRBvytkCD5QRRwn3DmXzAr2qurSRiqpRqO765YW82d8MPiFh6Ao7aY4SMGImsJOBseqiEhSj4y6hJlDAgFn675IX8hDtMvvkpBm1PTzWIDs7MQ4=
  - secure: sRnTP0Rknod4/PIQd7a/pApzzncJxvPfEEs383j+oJ0Cpi/meM92N0IOrLz4czk2am3qXXIKJezpFERt4VrRPsJ/UKvEuuqtMh0msZJ3IKd6Vsud6QdeTrA9k37vrmEdKn7ySPO4BoiUOhNr8dIwjcCWmlVKSLuhM9KWk8RZNhiqFZJTzA38nRM8MdfuuhQlrs5WbaO7kfqW+HO6ICD4fa1t0Qraw05kyCS7Wg4KZG8r5bTGQbxdQoCP2z4Ae+6m/BRmApOhMdVCgmQYNIpYpSjXcC1FCXqBYN5Go/VrpISkyhBr4V1qhYlb5qFyv6I7oJm3f0JNG1Jb2KnfKOC4/9YTchm/rc1kG6dqGDeKc8GieZrGJQC0s/VqwNTLtAPmcsJzgD3kIp1PMaZZNHuGQHVqYnYnCMf3Ysqpl9YboKHcfZdR1Z2jFftntf6nDr4BXVK39QuRl5G+/ZO0OAg6A1f5jT9z8cMU79dEObL9CxO0VLYcmxlySjYBk9DoML34tHGN8pvpmlIPnVTx7ykPEb5NHz+kWZTDafr0WkfLExDk1f7JlJKkEB27hNVnay6hBrTkDsapPRVSjR8fPsQkKIWjsHAbB25vxfzHeTjzfXpKf4s3AwIsyujPn1RlGpA2rsYUjtTa2TBGQkZUpH9ySN8QRdFzu4y6VrUg+iKArh0=
  - secure: Pf1EoG3+oE0zC7v7Tj2zVR6e7w9FsPrXzifhEIxujCupzL8CCVfdu5sOAAYYx8JhqXSP8NOBkRXCn9hn//XhG3W2nWyUl96FzW9Pl+39ArbA30HitNU4pitscC2aDU9u/4G5GO9eOK8zlOt7GAindA3r8kwbts3MRhHjlFblbHvM4DQbbTlfuQfroIEnWPSuE62ajSJx21PS6em/12VERVuSsD0OtbZbb1bVcgc4vPEr0rArzuV7SVTMOHHWl4lV8SdBYmGLGUFhTubR57g2k6KYpSU2C3Go6Wb6GVv9DMwHy0VrdeWLR4Q+ji9qTsHTiFat62JJ77lHpYq3C1x3rGGwhTL/vpBv56XlMV96/oZpEYiKmH31Q8L9EfYYnmISn3f3ukAMyXUiuEeW489FMajvsB1uTFxoJ4HEgaESWrUCL3TJ75gWaimL91Sbskfe/bYmTKxl4xvzg067zpUcrxSstFuMP054fPlpQ6AehdxbqbJno1cYz/oOFCSdqNB37UELSKYTMNavzIXCY3S8urLYhuq52s4Kj3DAW9v+STMA72vOlfTbWjTdy6I1smXgNoZbQyIkSoebQm+jIccGY3mATJHm+ol9MaTmkAgbIXtbz4XWbtvksQa2hZtMU1Hc55XRs0Ee6T+fxuyMbJvJ6vsThAziv7+M/rlI82OPSdY=
  - secure: I2tGKzG6XJK8Tmtcf6t95xUutjZq/NURwHZSE2Y3EzKAkrzXiy54wk/l5DNoXSRwB4Y789Lm6G23ADuEE8nK+mpeDhoAzJ7Cw1Qbb7glLjcHjIrmRoEDokNCi0D/wrugFjBUUpJZzqCDXlYPAaxW1IycgOvdNSy5yWQN6RxXSNvamyUq5uBuogZQ0szLZi7w3D1M/Pe5goCgD/PQBxq38w9VytcYnyQauLduCccqd2aAv0PPOkbOevZOIy517QVelQlPEJp9zgou/8O/L4d+Fk572lYSZFBP3vOMX4veGvcRC6nmLS0vw1Y1hH3jCpSK1dKmQ+ObTdGACKRoY/sJ0HQNkCqxwzqPzTTVVMXFGXMu4Tz7mV93djeXBxgSw7y+YmlGW04f4PhbcUUJC7k5QU0UQ6ZhEARp/bzSghoECdLmeQvT9/3rdIl6Ij9+KD/3L3wLXftDvHWM+3X6XDjebpUd/mY1PckzQPCsUWXszI22tOFI391HMaSm5N1S471olxXy0hfbEzgT/7fIsq3IL5yEtZsFBM/RymYbBkE1wae9/hzueYNk8GpXkqgEnwvCeAYCMQonvhwlfCK7TNPMl1r6zJWeqcoxE4V6mV/pQ1Wp1gih6Y135sdGdNa5jKYplPI7igeqyqPYLffcuPLul3IAcWVI0Grem4yaW4DQcbQ=
  - secure: zm6Ht71iBKONAq5isIQnYh4pRr72zInaDSmARNq5vigQ2tfH7FVkTR4Lz+KIHLXsrtJOHmnxTtCIwhCPsweTlBk8ZnognH23DvNAYIrQ0wxymxsLEPVsM0x/1vATe+FrPAdfP0YcnTwkmaGaExAnzmf/s/sJMgdrm9pZC8LpafT0fLkLZWxF1ipa2qhRd8QX/dd1yw3jLOYwjDevGjvPFyy9m1hozGg1N73fMj/NKvrHUp2287urcc+E3w5T6m0f1tSdmGj0cCSiU2A05L0l1HbA0JFHMYtCYpdEfQfEbPIe/68JdCd4sxxHTlfv+wGZiSmkGRDecvENQBjY/Q5Gxh3pe0C3o+9kJM6RaXnagidAR+bdg4dksdKoNT4pb8j5WeJTqLItSlOoHOM0I6/pt9vFuvB5YB2CQ/wVybncF0eg1FWVJH/dgwas/1xe4GoV3w3thMbFcT5KVXvJTQJ27ByxW+UsnCSZy3SlHyOuThwEToXE75DhnFjUBkpOIDjOU1OVibxkFN0Tr+t0n2zCSF7wwSMXPwLAPIlz0dBspE6txL5VOCQYyPrCgYpDHGSx+Iurk02T5vK/1CWUA2xPqa67+BPe+VX02Eekv/cBBpsEZW15PR65c2QRm0uvepRY676XXvv0oMW//23jGyEuJrvNoxq6CFBtwuZPyhl7cMQ=
  - secure: e3J4SZX/UfuRCU3Eg0vXSGKVVF0B0ZVOooEVgmIlunQtuJuRzG+e6xu003HgLKLzrZug9sLjHORNEe0qAXpiS4eCXnx7dLLtZ/6gotU9DqsEbvfzWovLudwPGK704pP6SSZ+bysyqpItweGLdidUOSS87BrS46WW2SOhFVHbNqR5IsmytU2TwFZX9IFQGphEahHMwVsDxWw3gm9yeLVduIiPCLjbEc9oPqsHh8gDOBlJ8KOq7OL3AE53YPf0QCA/WjYG+MC1BWmMFLFmw6rZ91GKAmaOsCIemgLHbn2iRIWTH+zexo/0Ms+aH4B90egtzqSpSdAe20Jqy7aGJnqqMhnG0I8C5dl0DUn/pq7UkfuYFHR+KNEzh3JAVZGYs40fGWum3Kwy35V4SR92YbFl6lD+np/BfQlY2zTOKso45HiJWTi4+gXTr2ceEPze/MNZlfWD1sXbR+HL196s8YerGl6GYtxxW2Qy8iVHJzcYiXr1dnC9VvtyIMjBU9CWDmOK+tQnYqFOi4VGWOIYXOJxU3j9nNNdvVtZTI4LQfGAjBc874lN3IuBXUdU+BD/8x9r/T/o53pCOj645JACyLThyVwDuUB4rRL66Qn6yQJvAXcw0YldZUS9DYAlgTwYHpLeTknNYka8x44N9M1b3kEr+dJXl++JiZuyP542OGgDe6U=
  - secure: lzPjpF1qtlVne8BQxzSB+4Ap2wejBNxs68Je+wUF+Q6fCOIe7TwqPDlPX4NJHJQYgauW0HhQtioh5TEHyDPI3AMJFCA+cq/dW3L5nQp8Uk2C0MY6fRRJgtCrt7MtjQLlC2MaJDEersDJcPnsemVcVYabGTodedAaIZ76VN+znap8XLHnJn0edbbpg01/ljs/RpaL0f7DC0uYVTgaSYTWUsHzlsiIelL1dcFk96awkIxpK8eIZjK82HmZG31XuFeQJAy1Sx90iiuWmA2H/aYvZ2Fk4RiH6OazY2mT0xrL3+6p8iFcxoxglNY9EA7ksm4xvOKvicODvo2EhKTMUc9zWx/KQsiOG4o8N8V+/lW1JDRY62TV6ab2H3AGB07/YfGgGsHp+m7P8b52G6LmbZpUiwROfLlBqwBA6i1Y3YTPwpazJnzmO8wT6HDRSK+q/NMjttoiI9J5ozOlQAewir99UJ5hl69y5M+x6RFEPxdKyceFQjNPOHn/rinMiR7Ug0t0NPRUQjZpXnJopdy2gqsMUHjiSVRQLwRLTGkzVuLcNQcLZ3OKb9+q+XkOhRDohnJusKH9uFKSzqVIdo27l4b+8xgaPMaBgg1QlZLwVIBCo6dMdDhySiIRZKlnZ5wMnKNXp2CilH2zuj32iZFz9SJWqIqubATg1X+lfCLGKugNbwA=
  - secure: JBdeLB4VzJnMwXZDoGisIg3CXn+EdUY5asnqPsjZrDTLzg5cHzodyZue3rvk+szhPPqwoFvIXwvpt9QAtlMUL5ivlAFtjZdKZXi5M4Dju+v37WwnWmp7hJHScQwWKfziZ99v75U7No+seya+v2Ldwyv5DmgAHuBKOMiP+xVGSZprpFxUp7LpMkruuV+NICdF8qk32GY5A6fWwv8Msrcrq3KHrqAH9QxjSEDMjuEhrLbKFVcd8K6UyTVkB7IWAqMTw+0G62NDSJWcg8Ypdoe7nWjaIRzy3SaCVqWDRX6Ter27kXXv8t6DwTrfyRdgWPe232DBHHxjS5lcAbEwk9XPMOt7lwt/RIz+DVHi2PCp9LF8po9DceGvjAMBgKaZH4lTuKcq1/f7f7CRWE0U8iBuRSTC8G+qGg9PlrPOn6vYHa27A4D6CkjktTQaVD5DSBB3Lv4WCYAN45pJGkSitmrbGRqJNS+0rsy/It80mxcZUAm1IXvYCbqzCsi4R53k1FzYQGIT1AzZiM6ElKB14AdtZtDBFC9VMiG9LrqTCBOfSdUkXv6WBzffR6aaHNKQXFAkRiYh7+hOQt3vkRKWeVj8wmA4gofcTploeK3NHIsgjr5HGYoSzjVgwy7vIOu/Hfx6j/vq5dJ5u1fSS39AsyYbTAKWeoaNVJYx74Lj+d0tWAM=
  - secure: VRDaafzOBrxo9Y8fo1vI0TFxHX4/fEtJdjxzoQY4VP7/M45/zdrrpv8m1XlYLsAt1DfaCNWei336H8aFMSAQVDf5e9IZbErutIoknL2291xqTbN4JgQwMzGj+X5VflNTt66WC5iXFOrEjSfqiAwyLG47QPcx+sFwMfNPJdutwYQv2tNrfxj6nqyLeScsBvbRrBDN62vNWPiXhtcum7/AuLuul4a+ct5nRRb+cBwWEOBhnkjdMfoLva0PEfRC45qwFSsRMkHGq7psxcg5qsNXl0FxWa9p9eazVPlatDctxI1asCJ9n787KNbWKaGxdwR92MdG5q+LtTiM8MBHa4Bm8v5a8BetDR3RKga4/GKHyL/MwQ1/BeSLUlgqkUMdz4MU+ygIWBBnBdN8sZ0CoWN+Hn1T7Xk63xLWNXgnvBtDryIZrKx0SZO5WHloDqnmhfHY0RrukO+cYsmic82Sth8SEBnSMMtMsArSXRhxBuIzU9FIp72Y+3urmCo3GK4UgLrX7Sd4s2bHSUXBTyb5gUzQPPm33geEqmRvMWlW6HGwi96XByWHFT1MUz+VDWS+/KsbWBrc42GYsHGa4w8fersWFUIZ9wo+zqkTvwPIjgHqdqO1gHci3Pj022vKX5YM4bBJBJxq86rgFIkXw7ysBTiWbXEzam8E0IGdMhKY//BTddk=
  - secure: vY/D4+6DFAgk4MI9Piqil1JHk/8BAa0FeCdFSRYmRvhKp7ygPASXI5T0bsBaV7uxafO/QfxSXADlCo+Iuc4m0MAWAs1TG2fqNAhXBN1KGBMSpLA4dv+kCsFwHdS/DpDS5spQOlvMWXsS+8nsk7lBt/O3Zq5wild29rcpk5/6IDffonueFl/5fxFe0oO5J+RneZduunhF+6/XaH/K8l+5sFwnNMKKl1CLbh5Lobc4HAx4rjv48SdZvcClMXdUQl9T5vPHVs7TiW4ttAj4mAlTK7pJvaOIZx2eNS97Ei5qY2Nn1wKAJ098m36LsoStkGtWkmPZq/GSG0tbi8kAMmX8ucm7AyfW0fGkNvLpvDdP6IYRXYhjFAmUJqgYvwkV+RYJf1JfeXrGX7QvFb6Q1gKl6oSRA1rN8P+sJTnZ+yRDGIuEEJxZNGJPBwlQmGd81BnvU6b3Lk/5lst+4vCObJhL2CKHitNfVbOhTJzDu9DqPL1utLlpPoKNY7mdSC5zjG6dlHnGu8juAELBnz5P8m3tHJkdqKW6QkbN+O2PbhaQeGCS2iRHuv+frulMD5jSbaJlRD18fNEA3igG5QgzaZl6maN89mecq29OvA64P6SzO18AK1UQPaqlyPLwSSXWMbzZ8az7VI4FqIUaH2AFW7KWAShH770dZ34KpmQSPtjcQJI=
  - secure: fwdtM6KEGXiLx1K7H9D45IgpyIJTJhNoTRLMLVGT9OH2A8sIekUYY/0ojTqQp2as9LnnjDrYlSx6j9S7Uj8orXv4PeLNoxrNs7a7aTnNfmiRc16ea8NZC28r4i2V1jCcOSKyD6e2IAmAz9zvRTEcWJFLfuJe/B0tP+cf8a8tJimQtLSUQDIL1jOntdq0E/Hjwv2t30ASQyrpPJOqS7wxAMSl6Ivo5voACjnDNBd3KG9VZXYgWCAFSRjvDmKA44fC++CFvYEn7glEwNPRUazQYF9R38pLikJ706cxZFN3zIX7mZxdBun9sCOCKxnlJh5wFvZ+z0NSH30aZDUr+cBUve3dIWLkMk2J3X2WGl1S4OCs1Ox4UDJCgdvbKOROY7vdXTVjX7lQxvKZj2VmR47cjbogNxhVKxbFjn3eGlnc0G3yZD0hdbASitPh3n91gy7KIorvHrIlVYeCE6ui2ZtzQq2hSZD+C0cI4MNV25NdXW4CKNJg5p+ylZ7z3187s9QiZ0hA3jqY9jU6GlwHc/Lc7bWVc0rbIoINlv3Kl7sDQ4Nb/x0lHcC83fy3CtMKoHCqRAa3bMVmKbCgDF7cSurFy0xcQ+z9cDHvOrvtFKRBOeeyt0rTINsjjt7YjI949Y+VT/qlVImdmbmId9MLpHWF4pcHZ6NxPjObTUGKZxaYa9Q=
  - secure: JwFtfnMsVLntDL1LdFQDcRvRS6Ns9vHQdItJQfDxwo67fdQRRDb0vcye0d/RoZWUervFrWypp68pUog3Ek/xB8h9pGwLrZx7zgT5rJjZPkCEg0d+rzaIrIraYjazISA99+oIHdBQdZjXT4b8zSneiSH/N1JDA9VFGNk9wxsHz5ikk3ZgEPF2nNSsmdDHp8uqxxiCNIfV2OtMrGAxk4KoHi2iuQHIRzYdRVaBMcmlyWV6qPWXo8coTMwPvfDEAbxzo6COXeeMNJmh7WRTDTl0YrPHfthSOF4pbiWBvJZZr6+rxkHtspmlFNfymUMDoTEsynAADkdL8aFJ+hXIqb9H6VfC5ZmxsVhlW2Xt0sfou/j4M10J85/3y5Qx4tOOpQ62ybQhP3mqbbYsY+QgFDLWGYdeT2ReecMtK9iqAwk9BUez4FQWSIkpDim4//xxMe0sgpwYLzLOEd0Yfe7zwUc6VoMQGqcLhzya8mu+nD0wBIWsu5oV1HYR19XW4CV/NMxrHK6mh5uXbwk/VYVgMXfN7R96TwiFEf3VRA/TPDk+7gkSFJMIQzn8wfOsZjEm5oIy/wWoRSlADvrLnHzLjvrb1DTByJOvD64uz4a8Cn88OuoPQFl2hbdcmgyBFwmRqxOFQ4Jy3dBsTxseFxyREFQ09ONgcBvAFfmCN4ES4un3CJU=
  - secure: VN3bBnRMZz9PxcQ06DfSjbYAG2Q28v9BvHDNqoYJH7G4rFzLD6sRyW3Vu//gWvNczVG5GHx1vi67N4Zh/gkl2GTld5oi82VyIg2DTSIpIMxl1U/UEjkaoM5lTJksYnHQ2UUiv2wdxtIXueDMqPi6I7BQhGTUcKpcYmjD59zsqv2HRYog4L4rFJdyHcjWKut3dThUfaIj/yCu25MzEkczNiwSoSjCElp2Un27CW2xhuperJoHduJgupEZyjgg60M/ZGVr3ny9O7T7h9wt6F2LWaGvAewQriRtHYhPVm9xhht9wdGjmWIVgkENxH+TjkIBqKobHePQkl+YKPNhI6j/hKkyUN8hEnkRg+/YH0gf3sbv46bjPKUGPPRNb48owdZGiitjiwCOeCMAVpekpxdWd2mziGy/SjD/f/lrOGSydarhkypkO/ACewjb9O9h46znirPpnhDMmNYP6D0N+8rwg7dY+qpSOD/l2NHYRMUkogSUnZ/g0pcCxgBY1gc3gLEAnHJYViKKnz3BqRefltY5UxYT2ffdSHYKAzfxMWfLqaTa/pd8msefWMa8R854LDrWnJEh7rXgagdxgcpakfQrlKjJqF8t9x7oKnhxR3kIx1Q42auDCkCqypDUJbVnH3MP4GgNjgChAxGWx9absWmGkLvKML1NMVeUODADpp5VtVY=
  - secure: FssM6LE/spNTN0hVGMJKwMLzbm7792YlCRaokdeH3srvExZPlUSsyjzNWOtOA9hwsKRRrCDoEjLmTkGmmY+D6nA8rKK+hCGJRYR2c/0cG6ZRZ3VvlBMKp07bdhAIk/ZkHQjdccu78FVN5gutMb1+HhbLSmOHAc6DewnOvnDR7fLgOf7hlVb8YyvNyCcJx0Jrbf//dBEXvSCF69AOs3UrkJ0vvT32jpBF0rAZkhH9lbrhyQaoBp9y+SBsWN1MWK/CyWsHaHt+D15vZOVXB2rQf31c8eMgZRKmtxtCNg0xK+AqIdVSebBTs7A/M/F7HHrX2we1I2FSCu6Am9rNdjjHzTSGSM/JDsA0AN0Jg83qtv4lIIJjex2B5jY3MaVK5trn/dARZzLxGXOCM9qWxK+FjiU/HVh8pyg3lNSLxKVzS3t6xJaejm0n713UE6F92FCgCWD1CSJWh8HYeq2cwg/D2on0D+pjvOcmjHyM7xYT+MAwn3q1eAATWiObIXr+zTYuk69NI4uGRytswiQSFOCjDbAsdVk0hU2lN3V0DHGfvC6gg1il+64HRf29cPn+jO9JYyAmdXcb7Kxhmn7ZTqUKMxNxXX1UBidaFI3v3Ge/Jbs84t32nJrjCSTbnWAYsEMehQq89eYWbihTqccYUvXRjhX1IneQ8Mj6pBN7aFQEsJU=
  - secure: lulRJn2lTqDRjW/LgYCGWyg56EzuRtAo+xuiXExuk8zW2oLy8WNmb8pjlx29114rZSwv6zbunye6tZKgW26t0Z0aav7XyYZribE0CNN2LQE1PX990F14CS+jv9xxOzy+6fdjFh2zYceTtYHbbBxHvGfUWWpOgwjZgc+3BguSWH7fRVKNy6GVzRLvANo8W9tyzswv9guiyn20Z80HiL5/ARlSt71QF0+LHkmhbURlrEwd8gXt8+VIVKBMw1/fk84vBdxca7DPQBKzCy76JL9iP5jS+dklRRo4Bnl0srOpJ8Sb0cLRizo13nNHiZKaBKjSgdxNgWFUsUuMuZIM2w15fkYzWRrPbCzR7gK3KKqNH4YDSEURKTmCqQEPqor08fGybBNgN7kzUg4aHVwyNAOrndiAEADEBFpagIxfzBkZ3FAtKyJtybuiL4ZohtuVlH9tQW9WkrcRxZE+6buXX8S0BhfjtPstD4mVqVNbuR08RQE7gPL3QkcwEHE776soNJyVv9as/9xO0UTiqp+yWf3XDVNcoN+qPKGNk01pGnEAtcqwIs69JFbpRuEabB+xTHZfoxo714tmS0yVSva1Yk159Eh4S6MrKbn0iymnFJz6H2QF/IYw1JL5g1aUd2v2eIUAwTiU4xgc+tH0g9D5+0zTt9M+dczvwsPNYDz39YpOMgo=
  - secure: DXiG7jplBYikVbBrrHlaEK2sgQblIuxRO96tZQReYDpUW5u1vMoDIZP0FFRK0wdbQkB//Upq9Ojtzt5xckA7cBLLmGtkoxgfZHdbeiUs5G5mVOkqSO5P7y0BGHyICaWm3lVxNysxppLTHnNcVgqSkOSD5Gg++sjoUrfM3EQqrxFUh7yom/KfQXlqoIsC9beGE4w2jMvprLFM0S0M3oUBS5/Wuwolx5no+F+cQW2GlNfRA2HocoE3hbR+WGlNNXp5hxDM8Y/qHfG5mRt5GcxgxUcnC0U5fGCBjhSinXD4PlPJ/YDL6tBvM6Fm0m3p4v4Q1ydhTit7c40LtLGSTR9+5Z+kLMgdvGXU8mDvVz3q9epSWfuA4zqzeyEOqC6dkPh37rPNDTY/wGYOeII+IbzVcCYZVpGb4E8DcK0JTZVDHgGwPR64a7yRrmLyrvrukFhr6CucU3s39s6tmTpm8lxrXhNewY4+TvRXUd+Vc9SIY35VXSg34knDdiKZu55kOdWwLi/f0DlB2/592Qujd1jIsTCvF2bXbc+Ps64OT/8pzEhVDiCUMgXTmPiH/dyZbwdb2P0VYnI/PCZP9v+LK+PR8WUY/mhwbWwQ2RIu4S002HPmLWi4foRAcGnNGNHO8IVVNdeNZD+PDIFazJru24E/GDsDEELbTHNvxALSvTojhPU=
  - secure: FGxKFmycwJFo3acDKxpdCM8Gaxme6YcSM+VT6ZHF6ojOgh5FPZCXRzwxDc8R8jw3osmQwdU+iJxUQecZZ7m9IKyXG0fYh1mfVA3eleOG0iUopMyujnSy6LzChaaKHCifogfr//SSVKpoUPprCdldDgp/rflrn8OWaAbXtnmq5ikEE891/I+t8PCzzjn8OsJjmGkQgIF3XUg81uvRHGA2FxYcrm3gJ8BqFUrv7nq9FFMayn6cUCtbNRE7T/vA+LyuP6uv0A5h+JXrmG6ZZ6hxCTKZ7qt0NjUnbdjT/NyjcPUuU/2Om0tPrTxvv8hflx/en1Ux/bfwaLO6frOpfooveBo8NKJkYluh+xnz7BilxQ8sts8+f30Pe5RhKwkSXJXuwfW47ZLo+nToVwnBSkf7H+37A16AhTs9Crxs119OpiQ5tdKqzaGv1kZarscPZZw9QiAf0Pe6FXsW0GLX7wUOQ16LRlIVOFFCS9Cc5lPtATdGzzQk3uRfIQ+U5qpLo7HvnG5mT7RZwrF13Z0+CPn4jp0kvNM1HJgNEWKG2Jklzg3LUW5mWS8WFnJfeZQRh8pvj/a/R1sTvdk8SVfYHfg3TdXyWvjA5joYEWf4OGfDAEhdB8C+xms3Fn/MDKqJE/1npJvaEDKxAInVpXDxLGEFxAcPHvDdv1IkTldI0LuEuew=
  - secure: DGb1NaHw0X18Jn6YU78gTUoYoY2ehXn1/HxuuFuHMJICwYGvxlFgoNTJqwnVTT1vVzl4BPcJD+UNAa/1IPXHNtdqZubYFM0CDYSokRJyXdV12slijsaA7JbPr4KQumX2jV+Ei8yfyjDP3oPIIym6ohwcbZeM0/4T4AB5GTH9lb+Hk3SMsMRCKpEy82ULz1Myn7GsT/lAELLNhiLQA569HXS7FU0tylAViKFjQUXXJHAA1m5WXykAT5pbUaLmxH7Zg3RpSeHg/7ZDYabUeVkRAEa/vfY2iKgpQEsc14NOSnBlCGXUZdPfeS+rdqClDCX1w5dyzLgJUOGIGIYMvDO5iL4/QjV7hOQR1FkkC26eT7ZzcwPQ7vSGIC5M23HxHTuv+iQcfkgIAFA6ubndl9LhRnPeGa4zhj52n6hThnx2pEpi6ui+amjd7PlakSK3Dt3RCavSDjiYKHuttDvGs7J4YzOrmkQ7fu7WdzDYhEBpHrGLbUVkVWiWF96chqP1qV4WYfg9U4D15g+tfCB1vZ5lYTs5lhQb9adf/0TBqBJzQ+4bVT8UdCTbaC+9Kg0iGnXxuUb2T9H/5LcGGMnB6Ss0jVlKHwsPzYpdSrjGQGmtvCIcrChEERc/VmYdUuhTjNDiK60Q6hX2ivcNy13A/Zf976I60MJfHOq4+2FvKwo/x9E=
  - secure: 1dk9yKdSgotwH/Qd89nX4cUL96oB3w/3SeWrl0LytlPuBM0k5AqAzoXPqTzB8fR1ycugcZJRHm5oHIoK0YdVTX/pwJ64g0pkrwHXOOBzQZmiDsFK/X2klZP644/lypaYd1ZH5lLtbOI564LlN4Nm7wXna+3TUIB5FRcavtBxiVS9xPpfYuU65Thl3alsxIoSUXB5pqGVlAE124uFzV7UIOxL3oZuc7xbJ5e2kiOzRMo23Mw00hzqk4QTfCGXccS/2HtPBQEQqT99NEQ7GCDdnpo2z3s9TB2EL5Y3ymaPJN2K+tgBXfmU1dMVxyd0x6/jGgG9FvoSDb8CUXgX3bLIWi8OTlxw9rhnLDVHzsZuTjUZaHL7QNQ6N5PCi1ilAWqe3BlBAihIBe45n2gv9/RNHdtomMkHGAm98ej3jn7RuOTqm6slrlxRPJyvR+6i1THUFpcHenU8pAOI6Yt+RiksiR7G7/wOYgW8QbsAgJ+uak3wc9MFKqPYsxNLU8jwC78V0tWlFno76kc0QsyO2geuXIEEixe59cqkcD1Fj/iAeqgH6KCoxJiyW5TfqV2jwU+xU2CiyzuXjfGl3t20mnmoxLg5Ql2V4PK1LZhDgM7NGjPaDU0q/L8UmyOn9eKPLxfPjJm0/oHZ/gasgOlR7tJbLB7wxcTNTb59GYL/IXrArJI=
  - secure: 0uv+msljcS9wXnbnf8beyWIa+Jxrd15ho/sxcBjTs45bPCaOBItWGGNp2vvpyRloMk3fUzdRIWBADF0Jg81w/tJ/ijCq9km4Bd1Iygp82esMNIuG6yydZRmQNuAEXJ5ke7w0g42hjZAANmYtVkZNAFtKIZ4pmTLufZk05r7Hu4ZHNwnn3G0ZuhTT+VwOOjWmHmuQcpiTyue6/KKOv9AeF9JlxKqDsuG+GB/XWaWZtnaB1+rjuZPL43uQXAEsWGZPoOA1mrIRwiDpmnqOvVkg2vRGl1YGZMBfnQ8+069zdTpOMgbQYf/HfLU6wqvH0YtnOBjWgeykOL1iycOz538/KeRfBpQMY0iGmaj3N/eK9Dh18AulBbQUiP1m28axz5FQavp+500WYhF0DedOLrYEibIf6FerY2s2OXCRIDktaJMKqjXlnf+xK8FsSsGrZ5UtftaS7zsrgEgYtdTsD66d4NSJHNDNwR5sEyWzSMQ3hdZwwn67mCarFIJHD6QlG/auBrGujub/ZybYhsXLQBRjGW2QZa2TXASsutGnxmZBj+vXl2HkUqdAbOY4DOGecnpR2zZ2pZMGvWLwUruTY7TIyf/wGbQQXx2t+1U2VbGxkDpcOrqiy8hQaPDYkiwX3dQ6HHzQhtBqpPesiUpxzIdqACFW5kL10mOfgx6VcUoCP1A=
  - secure: iEmpMqPI5J9wYam/HQ8H84BbR/eXRe3HTFyH4ifMsCkIU2AveWljs3wNMQfyjrdeJQ2KqOenJH2z94IOn8bzZ6VwWb9/A6TwaA3MUz+dZ3wCpz+3g4WsW8USOR8LV9xP3sYoouL2MbtHOVR7cTPGq5ZboGNZRnh8quFsKN9IgWeyHYyNtZQy8G2p0WieYNVgFYhQ9X3eVwe+MvTZpOIPyZNfxLhqd7365XbrG7qIBkGnS2BOf3QYWfibIw6clMifIx1K+rSOMqT7ry121MmDTeok48uREQ0DMnRz0xsKcXkL1LWo66XcBOPYtMoiOQZ8UJw7e6ImYzKC/+muRGWTvfBRpfQ3a+Fa8FiYLKa+jDQ82tsCXgUTu+IH9V15J6RNTyBTb3vOoJhgZX6NSHAVFA3roaPODBuTCjAsLL0/JYKU8wVMI94BbnOD1i3AVFfZt8hUFPlddRQcxA/us+JXmbgDI+Gr1ZbPkhaf4jeG0Ds2AHU1i+WqHmztFZwJBM9/hAoNe29tt7CnL3aZUZbVyR6Ki6+gAcdSOnzUgeNqMk0LtM0CREBrrXmudBN4RgVnG2q1WANO/n4OxTcuTp8swiJadsqqVhXEoEBlaro4WTtwKhyokh/l+N3unki0G0+C+pxN7TKkk6i9f/YRCGqi/sPT1Pq24Qu1efavNS9HbOs=
  - secure: b5e7Clyq7gw60rJeRC2wjfnSVGbPDuyiIU0b2CTVRsEPtbjwlQ6CBKFokGPd2Ew0ELQ0ZN+pvfJuzsnb/ge2BZZh4SZY8h/ajOj9/M2H7PZMoo8JwVMGzJlTydE4F+UJiEfHAIG4M6oBY00dK9zXNB5bswadqZILW7K1g0+TEKzZw79uEKWLEeDdFqFcCBGPpWcuj9uJ45N0dmI+Rqiw6a+UegD71FKg5BB9zIN/bPBAcGdU/c7OMaihO4y8vKlMki8NvWytpfk8iUrqwhJgzraxFBXBUO2hTx3JoNckN6OTxZPZCMeX1bcnKb/ybcM40wN8RMG+Wjt5KamsIILbgd+jy9pMnA+DQHVcXd/FwgpU+dQg+3PegWbIagzr8mX7//FO6sFLzEto3z7CE6rAcbeKr1E+Y7YB7LZJYzCznesI5zKt3YuhpYvTwwtzoiJcbd9zXY6yniigvaUrzAqGpUM4qQdSIS6VGP7s/DfXWxA1UlFQQsHRSiV5/fAXYxA1UnWfvF/M/qdfFmA5MpF2eMy/0C4os/fwT0yP+SzOl9rXG7rbhfjy5/olUJ6h35we775sK/4p++ocLr+NuS/dzj9kdR9kPS11o0EoNRAaLASx33SL0YOMPqcn7nDn0zDbx2GruqTzjuKpy80XVUj1+j+b8/V5l34yDKm/JRnTkKw=
  - secure: d7MhroD1gESrpPQklKYcPoaJVnoFun2d9Kv6LZ+6Eo0y3zg3QzLL2q6pHZxzXM/uwO2DccekZR8cP7pJpn9WvEQaWlHuIEL2QJYcxRQ4oJ+WxlGZxtlCliiEzW8jBEv77ABbNWwb8xx7SKJphAVBBNXgQJXteFylnupaWr4cWH6nDv9P3dFCeHkWIXtSU2Npmx0sqjQ5sw+a9hfrZxy0R2Bvmu8F/UWmue5a3KjhnAXF6Vb+jk2yZ14veONOe2LEPRw9nNXjP/+WSdmhPwaMgA/zlTAkZnTpyyhOicOWG9LkBpxCirx3xCxzcqyAxPsWhLzUbS3rqh+lwc/naANpm7jJ+7wy0MssZM2TG+0wHfCL39Ii+c9bpFCs4+AXVNPbXktPzt8TCzoCCekSZW14Dqwts+rCASMFfgJ3UsG2tblPBAKeV6qry64bStmdvddqrhOdnpJ6bnS6RmYkRXZ9yAkjoiyYcFY+S1UnKYAPTIWaBX0uI3Xj9Xjj/dGlBgNHNSIkZrvXCNw3maAGJjmMSPOVElB0ftIoGfXhHtAPUaxHSZQXFZxpeFPZWXnACulHLnxrRIEA1f1dxUtCKZmj30LAoP7nJ7F8+b0dz7770ZQQ+5ykA5Sm3e/Z/gqY2Hkg0ZXLIIv2Hqbm5krcsh7jDKyw/w45xeB81/t73mq1zpg=
notifications:
  slack:
    secure: KpMEfM6BPCmcHQsFM/RfMwxUVujTCRY3nolMnQ8MllK04TXZswW7qwtdb32jSpja2N0F3CUx/UEeushpdQ51eD+XqFnpioPFUzoTm+vmAza6QiXvQDGAMIF688BMjlR/BeCIVL7BwEUd5vBv2G0nh9hgqE2ItBc4X9UoMikn+StiNuVwHP9WHJ2GpLW9ft9TPXyUrtNsaIhQ3AJCJyBO0H+HZpK8AaTv/IA+rcfcvv73mB4LzK6o4PxfIeJAE2NeW9v0+pNlQ7obQVmltAvOd3W6mWgVvYA0I0NJN0LCRd5LFzf/uQQAh1n4oUgnAnQKUWBckcWRnznx14r1LWRyRgZMIJdGCKpn+MQPl2I8WHnHgl1YRxFxD9JjPHquoe7tPlbbaenj7eC8By7s+Q7gog6F4h6Df0JsiRtfg/fuGkLukqAfWrrTND9T3EIZCL6k4HtpLvvfG1pz9kRIKco2lUKyqZUeZYuimElmZ9Pw7wiUogfhjfnMGWzpERNwZewGt7LDNSNy9nLjzGd36IrqXjE+4rwKkZ6/Bcv8/zh1KCRBxT+3OT4a7c4RmJ9ay+thzbJVatwzUYZ4GQE3cw196I1MJUnDMpqm0z0BRxWvtdZfA/Jo97HVfPsC43R8VDNBzXfZLLryCj9FIKUrX84yAI3/4dUe5Nef2mp6YewXAGU=
before_deploy:
  - if [ ! -d "$HOME/google-cloud-sdk/bin" ]; then rm -rf $HOME/google-cloud-sdk; curl https://sdk.cloud.google.com | bash; fi
  - source /home/travis/google-cloud-sdk/path.bash.inc
  - gcloud --quiet version
  - gcloud --quiet components update
  - gcloud --quiet components beta update
  - gcloud --quiet components update kubectl
deploy:
  skip_cleanup: true
  provider: script
  script: scripts/travis-deploy.sh
  on:
    branch: master
  skip_cleanup: true
  provider: script
  script: scripts/gcloud-deploy.sh
  on:
    branch: kubernetes
after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
    docker build --quiet -t transloadit/uppy-server:latest -t transloadit/uppy-server:$TRAVIS_COMMIT .;
    docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
    docker push transloadit/uppy-server:$TRAVIS_COMMIT;
    docker push transloadit/uppy-server:latest;
    fi